---
title: "Advanced Features"
description: "Configure extended thinking using the Anthropic Messages API format."
---

# Advanced Features

Neosantara AI supports advanced Anthropic features like extended thinking, allowing for more complex reasoning and chain-of-thought processing.

## [Extended thinking](#extended-thinking)

Configure extended thinking for models that support chain-of-thought reasoning (e.g., **Kimi K2**, **Claude 3.7**). The `thinking` parameter allows you to control how reasoning tokens are generated and returned.

<Note>
  Extended thinking is only available on specific reasoning models. Ensure your chosen model supports this capability before enabling it.
</Note>

### [Example request](#example-request)

<CodeGroup>

```typescript thinking.ts
import Anthropic from '@anthropic-ai/sdk';
 
const anthropic = new Anthropic({
  apiKey: process.env.NAI_API_KEY,
  baseURL: 'https://api.neosantara.xyz/anthropic',
});
 
const message = await anthropic.messages.create({
  model: 'kimi-k2',
  max_tokens: 8192,
  thinking: {
    type: 'enabled',
    budget_tokens: 5000,
  },
  messages: [
    {
      role: 'user',
      content: 'Explain quantum entanglement in simple terms.',
    },
  ],
});
 
for (const block of message.content) {
  if (block.type === 'thinking') {
    console.log('ðŸ§  Thinking:', block.thinking);
  } else if (block.type === 'text') {
    console.log('ðŸ’¬ Response:', block.text);
  }
}
```

```python thinking.py
import os
import anthropic
 
client = anthropic.Anthropic(
    api_key=os.getenv('NAI_API_KEY'),
    base_url='https://api.neosantara.xyz/anthropic'
)
 
message = client.messages.create(
    model='kimi-k2',
    max_tokens=2048,
    thinking={
        'type': 'enabled',
        'budget_tokens': 5000,
    },
    messages=[
        {
            'role': 'user',
            'content': 'Explain quantum entanglement in simple terms.'
        }
    ],
)
 
for block in message.content:
    if block.type == 'thinking':
        print('ðŸ§  Thinking:', block.thinking)
    elif block.type == 'text':
        print('ðŸ’¬ Response:', block.text)
```

</CodeGroup>

### [Thinking parameters](#thinking-parameters)

*   `type`: Set to `'enabled'` to enable extended thinking.
*   `budget_tokens`: Maximum number of tokens to allocate for thinking (chain-of-thought).

### [Response with thinking](#response-with-thinking)

When thinking is enabled, the response includes thinking blocks separate from the final answer:

```json
{
  "id": "msg_123",
  "type": "message",
  "role": "assistant",
  "content": [
    {
      "type": "thinking",
      "thinking": "Let me think about how to explain quantum entanglement...",
      "signature": "signature-xyz"
    },
    {
      "type": "text",
      "text": "Quantum entanglement is like having two magic coins..."
    }
  ],
  "model": "kimi-k2",
  "stop_reason": "end_turn",
  "usage": {
    "input_tokens": 15,
    "output_tokens": 150
  }
}
```