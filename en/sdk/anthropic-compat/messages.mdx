---
title: "Messages"
description: "Create messages using the Anthropic Messages API format through Neosantara."
---

Create messages using the Anthropic Messages API format. This endpoint is fully compatible with the official Anthropic SDKs and tools.

**Endpoint**

`POST /v1/messages`

### Basic message

Create a non-streaming message.

<CodeGroup>

```typescript generate.ts
import Anthropic from '@anthropic-ai/sdk';
 
const anthropic = new Anthropic({
  apiKey: process.env.NAI_API_KEY,
  baseURL: 'https://api.neosantara.xyz/anthropic',
});
 
const message = await anthropic.messages.create({
  model: 'claude-4.5-sonnet',
  max_tokens: 150,
  messages: [
    {
      role: 'user',
      content: 'Write a one-sentence bedtime story about a unicorn.',
    },
  ],
  temperature: 0.7,
});
 
console.log('Response:', message.content[0].text);
console.log('Usage:', message.usage);
```

```python generate.py
import os
import anthropic
 
client = anthropic.Anthropic(
    api_key=os.getenv('NAI_API_KEY'),
    base_url='https://api.neosantara.xyz/anthropic'
)
 
message = client.messages.create(
    model='claude-4.5-sonnet',
    max_tokens=150,
    messages=[
        {
            'role': 'user',
            'content': 'Write a one-sentence bedtime story about a unicorn.'
        }
    ],
    temperature: 0.7,
)
 
print('Response:', message.content[0].text)
print('Usage:', message.usage)
```

</CodeGroup>

#### Response format

```json
{
  "id": "msg_123",
  "type": "message",
  "role": "assistant",
  "content": [
    {
      "type": "text",
      "text": "Once upon a time, a gentle unicorn with a shimmering silver mane danced through moonlit clouds, sprinkling stardust dreams upon sleeping children below."
    }
  ],
  "model": "claude-4.5-sonnet",
  "stop_reason": "end_turn",
  "usage": {
    "input_tokens": 15,
    "output_tokens": 28
  }
}
```

---

### Streaming messages

Create a streaming message that delivers tokens as they are generated.

<CodeGroup>

```typescript stream.ts
import Anthropic from '@anthropic-ai/sdk';
 
const anthropic = new Anthropic({
  apiKey: process.env.NAI_API_KEY,
  baseURL: 'https://api.neosantara.xyz/anthropic',
});
 
const stream = await anthropic.messages.create({
  model: 'claude-4.5-sonnet',
  max_tokens: 150,
  messages: [
    {
      role: 'user',
      content: 'Write a one-sentence bedtime story about a unicorn.',
    },
  ],
  temperature: 0.7,
  stream: true,
});
 
for await (const event of stream) {
  if (event.type === 'content_block_delta') {
    if (event.delta.type === 'text_delta') {
      process.stdout.write(event.delta.text);
    }
  }
}
```

```python stream.py
import os
import anthropic
 
client = anthropic.Anthropic(
    api_key=os.getenv('NAI_API_KEY'),
    base_url='https://api.neosantara.xyz/anthropic'
)
 
with client.messages.stream(
    model='claude-4.5-sonnet',
    max_tokens=150,
    messages=[
        {
            'role': 'user',
            'content': 'Write a one-sentence bedtime story about a unicorn.'
        }
    ],
    temperature: 0.7,
) as stream:
    for text in stream.text_stream:
        print(text, end='', flush=True)
```

</CodeGroup>

#### Streaming event types

Streaming responses use [Server-Sent Events (SSE)](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events). The key event types are:

*   `message_start` - Initial message metadata
*   `content_block_start` - Start of a content block (text, tool use, etc.)
*   `content_block_delta` - Incremental content updates
*   `content_block_stop` - End of a content block
*   `message_delta` - Final message metadata (stop reason, usage)
*   `message_stop` - End of the message
