---
title: "Image Understanding"
description: "Analyze, describe, and extract information from images using multimodal AI models."
---

import { ModelCards } from '/snippets/model-cards.jsx';

Neosantara API supports multimodal capabilities, allowing you to send images along with your text prompts to various AI models. This enables use cases such as describing scenes, identifying objects, reading charts, or extracting handwritten text.

## Supported Models

<ModelCards capability="vision" />

## How to Use

To use image understanding, you provide an array of content parts in your user message, including a part of type `image_url`.

### Using an Image URL

You can provide a publicly accessible link to an image.

<CodeGroup>

```python OpenAI (Python)
from openai import OpenAI

client = OpenAI(
    api_key="YOUR_NSK_KEY",
    base_url="https://api.neosantara.xyz/v1"
)

response = client.chat.completions.create(
    model="claude-4.5-sonnet",
    messages=[
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "What is in this image?"},
                {
                    "type": "image_url",
                    "image_url": {
                        "url": "https://science.nasa.gov/wp-content/uploads/2023/09/web-first-images-release.png",
                    },
                },
            ],
        }
    ],
)

print(response.choices[0].message.content)
```

```javascript OpenAI (Node.js)
import OpenAI from "openai";

const openai = new OpenAI({
  apiKey: "YOUR_NSK_KEY",
  baseURL: "https://api.neosantara.xyz/v1"
});

const response = await openai.chat.completions.create({
  model: "claude-4.5-sonnet",
  messages: [
    {
      role: "user",
      content: [
        { type: "text", text: "What is in this image?" },
        {
          type: "image_url",
          image_url: {
            url: "https://science.nasa.gov/wp-content/uploads/2023/09/web-first-images-release.png",
          },
        },
      ],
    },
  ],
});

console.log(response.choices[0].message.content);
```

</CodeGroup>

### Using Base64 Encoded Images

For local images, you can encode them as Base64 and send them using the `data:` URL scheme.

<CodeGroup>

```python Python
import base64
from openai import OpenAI

def encode_image(image_path):
    with open(image_path, "rb") as image_file:
        return base64.b64encode(image_file.read()).decode('utf-8')

base64_image = encode_image("path/to/your/image.jpg")

client = OpenAI(api_key="YOUR_NSK_KEY", base_url="https://api.neosantara.xyz/v1")

response = client.chat.completions.create(
    model="claude-4.5-sonnet",
    messages=[
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "Describe this local image."},
                {
                    "type": "image_url",
                    "image_url": {
                        "url": f"data:image/jpeg;base64,{base64_image}"
                    }
                }
            ]
        }
    ]
)
```

```bash cURL
curl https://api.neosantara.xyz/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_NSK_KEY" \
  -d '{
    "model": "claude-4.5-sonnet",
    "messages": [
      {
        "role": "user",
        "content": [
          { "type": "text", "text": "What is this?" },
          { "type": "image_url", "image_url": { "url": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" } }
        ]
      }
    ]
  }'
```

</CodeGroup>

## Supported Image Formats

The Neosantara API supports the following image formats:
*   **JPEG** (`image/jpeg`)
*   **PNG** (`image/png`)
*   **WebP** (`image/webp`)
*   **GIF** (`image/gif`) - Note: Some models may only analyze the first frame.

---

## Technical Bridge

Neosantara acts as a unified multimodal bridge, normalizing complex vision requests across diverse upstream protocols.

### Normalization Logic
When you send a multimodal message, Neosantara's **Multimodal Adapter** automatically transforms your request to match the specific requirements of the target provider:
*   **Anthropic (Claude)**: Images are converted to base64 `document` or `image` blocks.
*   **Google (Gemini)**: Images are processed as `inline_data` parts.
*   **OpenAI Compatible**: Standard `image_url` format is preserved or proxied.

### Security & SSRF Validation
To protect infrastructure and user data, all remote `image_url` requests undergo a **Security Handshake**:
1.  **DNS Resolution**: The target hostname is resolved to an IP address.
2.  **Range Check**: Private IP ranges (e.g., `10.x.x.x`, `192.168.x.x`) and loopback addresses are strictly blocked.
3.  **MIME Verification**: Neosantara performs a pre-flight `HEAD` request to verify the `Content-Type` before allowing the model to access the resource.

### Privacy & Persistence
*   **Ephemeral Processing**: Images sent via `image_url` or base64 are processed in-memory and are **never saved** to Neosantara's permanent storage.
*   **Permanent Storage**: If you require images to persist across multiple sessions (e.g., for Batch API), use the [Files API](/en/sdk/openai-compat/rest-api) to upload and retrieve a `file_id`.

---

## Full Implementation

For complete code examples and specific content block structures across different SDKs, refer to:

*   **[Responses API Vision](/en/sdk/responses-api/image-input)**: Using the `image` part type in the modern API.
*   **[OpenAI Compatible Vision](/en/sdk/openai-compat/chat-completions#image-attachments)**: Standard `image_url` implementation for OpenAI SDK.
*   **[Anthropic Compatible Vision](/en/sdk/anthropic-compat/file-attachments)**: Using Anthropic's image block format.

---

## Best Practices

1.  **Image Size**: For best results, use images smaller than 5MB. Large images may be automatically resized by the upstream provider.
2.  **Detail Level**: While some models support a `detail` parameter (`low`, `high`, `auto`), most models optimize this automatically.
3.  **Multiple Images**: Most multimodal models support sending multiple images in a single request for comparison or sequential analysis.
