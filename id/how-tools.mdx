--- 
title: "Cara Mengimplementasikan Penggunaan Tools"
description: "> Panduan untuk mengintegrasikan dan memanfaatkan tools dengan model Neosantara untuk kemampuan yang ditingkatkan."
---

## Memilih Model

Umumnya, model dengan kemampuan `function_calling` cocok untuk penggunaan tools. Untuk tools yang kompleks dan kueri yang ambigu, model seperti `nusantara-base`, `gpt-4o-mini`, atau `command-r-plus` direkomendasikan karena mereka menangani pemilihan tools dan inferensi parameter dengan lebih kuat.

## Menentukan Tools (Specifying Tools)

Tools (fungsi) ditentukan dalam parameter tingkat atas `tools` dari permintaan API Kamu. Setiap definisi tools mencakup:

| Parameter | Deskripsi |
| :--- | :--- |
| `type` | Harus `"function"`. |
| `function` | Objek yang mendefinisikan metadata fungsi, termasuk nama, deskripsi, dan parameternya. |
| `name` | (di dalam `function`): Nama tools. Harus cocok dengan regex `^[a-zA-Z0-9_-]{1,64}$`. |
| `description` | (di dalam `function`): Deskripsi teks biasa yang terperinci tentang apa yang dilakukan tools, kapan harus digunakan, dan bagaimana perilakunya. Ini sangat penting agar model memahami tujuan tools. |
| `parameters` | (di dalam `function`): Objek [JSON Schema](https://json-schema.org/) yang mendefinisikan parameter yang diharapkan untuk tools tersebut. Skema ini menjelaskan `input` yang diharapkan tools. |
<Accordion title="Contoh Definisi Tools Sederhana">
  ```json icon="code"
  {
    "type": "function",
    "function": {
      "name": "dapatkan_cuaca",
      "description": "Dapatkan cuaca saat ini di lokasi tertentu. Gunakan tools ini ketika pengguna bertanya tentang kondisi cuaca untuk kota tertentu. Pastikan untuk menanyakan kota jika tidak disediakan.",
      "parameters": {
        "type": "object",
        "properties": {
          "lokasi": {
            "type": "string",
            "description": "Kota dan negara, misal Jakarta, ID"
          },
          "unit": {
            "type": "string",
            "enum": ["celsius", "fahrenheit"],
            "description": "Satuan suhu, baik \"celsius\" atau \"fahrenheit\""
          }
        },
        "required": ["lokasi"]
      }
    }
  }
  ```
</Accordion>

### Praktik Terbaik untuk Definisi Tools

* **Berikan deskripsi yang sangat terperinci.** Ini adalah faktor paling penting. Jelaskan apa yang dilakukan tools, kapan harus digunakan, dan arti setiap parameter.
* **Prioritaskan deskripsi daripada contoh.** Penjelasan yang jelas dan komprehensif lebih berharga bagi model daripada sekadar contoh penggunaan.

## Mengontrol Output Model

### Memaksa Penggunaan Tools (Forcing Tool Use)

Kamu dapat memaksa Neosantara untuk menggunakan tools tertentu dengan parameter `tool_choice`.

Opsi `tool_choice`:

* `auto`: (Default) Model memutuskan sendiri.
* `any`: Model harus menggunakan salah satu tools.
* `{"type": "function", "function": {"name": "nama_tools_Kamu"}}`: Memaksa model menggunakan tools spesifik ini.
* `none`: Mencegah model menggunakan tools apa pun.

### Output JSON

Kamu dapat menggunakan tools untuk menginstruksikan Neosantara menghasilkan output JSON yang mengikuti skema tertentu, bahkan jika Kamu tidak berniat mengeksekusi output tersebut.

* Biasanya berikan **satu** definisi tools.
* Atur `tool_choice` ke nama tools tersebut.
* Parameter fungsi mendefinisikan skema JSON yang diinginkan.

## Troubleshooting

### Panggilan Tools Paralel Tidak Bekerja

1. **Format Hasil Tools Salah**: Pastikan semua hasil tools dari satu pesan `tool_calls` dikirim dalam pesan `tool` yang sesuai secara berurutan atau dalam satu array jika didukung.
2. **Prompt Lemah**: Gunakan bahasa yang lebih kuat dalam prompt Kamu, misal: "Harap gunakan panggilan tools paralel untuk mendapatkan cuaca Jakarta dan Bandung secara bersamaan."

### Nama Tools atau Parameter Tidak Valid

Jika model gagal menggunakan tools (misal: parameter hilang), biasanya karena deskripsi tools kurang jelas atau informasi dari pengguna kurang lengkap. Perbaiki deskripsi `description` pada definisi tools Kamu.
