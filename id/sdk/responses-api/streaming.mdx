---
title: "Streaming"
description: "Pelajari cara menggunakan Server-Sent Events (SSE) untuk menerima pembaruan waktu nyata dari API Responses."
---

[API Responses](/id/sdk/responses-api) mendukung streaming, yang memungkinkan Kamu menerima token saat dihasilkan alih-alih menunggu seluruh penyelesaian selesai. Ini memberikan pengalaman pengguna yang jauh lebih baik untuk aplikasi obrolan.

Untuk mengaktifkan streaming, setel **`stream: true`** di bodi permintaan Kamu. Responsnya akan berupa stream Server-Sent Events (SSE).

### Contoh Permintaan

Gunakan API `fetch` standar untuk membaca stream secara waktu nyata.

<CodeGroup>

```typescript stream.ts
const apiKey = process.env.NAI_API_KEY;

const response = await fetch('https://api.neosantara.xyz/v1/responses', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    Authorization: `Bearer ${apiKey}`,
  },
  body: JSON.stringify({
    model: 'grok-4.1-fast-non-reasoning',
    input: 'Tulis haiku tentang mendebug kode.',
    stream: true,
  }),
});

const reader = response.body.getReader();
const decoder = new TextDecoder('utf-8');
let buffer = '';

while (true) {
  const { done, value } = await reader.read();
  if (done) break;

  // Gunakan mode streaming untuk menangani karakter UTF-8 yang terpisah
  buffer += decoder.decode(value, { stream: true });
  const lines = buffer.split('\n');

  // Simpan baris terakhir yang berpotensi tidak lengkap kembali ke dalam buffer
  buffer = lines.pop() || '';

  for (const line of lines) {
    processLine(line);
  }
}

// Flush sisa byte dan proses baris terakhir jika ada
buffer += decoder.decode();
if (buffer) {
  processLine(buffer);
}

function processLine(line) {
  if (line.startsWith('data:')) {
    const data = line.substring(5).trim(); // Menangani "data: "
    if (data === '[DONE]') return;
    
    try {
      const event = JSON.parse(data);
      if (event.type === 'response.output_text.delta') {
        process.stdout.write(event.delta);
      }
    } catch (e) {
      // Lewati JSON yang tidak valid
    }
  }
}
```

</CodeGroup>

---

## Event Streaming

API Responses memancarkan event tertentu selama proses pembuatan:

| Tipe Event | Deskripsi |
| :--- | :--- |
| `response.created` | Dipancarkan saat objek respons diinisialisasi. |
| `response.output_text.delta` | Berisi potongan teks di kolom `delta`. |
| `response.output_text.done` | Dipancarkan saat blok teks telah selesai dibuat. |
| `response.item.completed` | Dipancarkan saat item tertentu (seperti panggilan tool) selesai. |
| `response.completed` | Event terakhir yang berisi objek respons lengkap dan statistik penggunaan. |

<Note>
  Saat membangun parser kustom, selalu cari tipe `response.output_text.delta` untuk menangkap teks streaming untuk UI Kamu.
</Note>
